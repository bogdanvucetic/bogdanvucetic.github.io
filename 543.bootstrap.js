"use strict";(self.webpackChunkcreate_wasm_app=self.webpackChunkcreate_wasm_app||[]).push([[543],{352:(e,t,n)=>{let r;function i(e){r=e}n.d(t,{FH:()=>d,N1:()=>u,Py:()=>f,Qn:()=>h,Yy:()=>o,bL:()=>g,fh:()=>s,lI:()=>i,vV:()=>_});let l=new("undefined"==typeof TextDecoder?(0,module.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});l.decode();let a=null;function o(){return r.get_memory_buffer()}const s=Object.freeze({Alive:1,1:"Alive",Dead:0,0:"Dead"}),c="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>r.__wbg_line_free(e>>>0,1)));class u{static __wrap(e){e>>>=0;const t=Object.create(u.prototype);return t.__wbg_ptr=e,c.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,c.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_line_free(e,0)}tick(){r.line_tick(this.__wbg_ptr)}static new(){const e=r.line_new();return u.__wrap(e)}change_rule(e){r.line_change_rule(this.__wbg_ptr,e)}set_length(e){r.line_set_length(this.__wbg_ptr,e)}length(){return r.line_length(this.__wbg_ptr)>>>0}cells(){return r.line_cells(this.__wbg_ptr)>>>0}}function d(e){return e.buffer}function _(e){return new Uint8Array(e)}function g(){const e=r.__wbindgen_export_0,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)}function f(){return r.memory}function h(e,t){throw new Error((n=e,i=t,n>>>=0,l.decode((null!==a&&0!==a.byteLength||(a=new Uint8Array(r.memory.buffer)),a).subarray(n,n+i))));var n,i}},543:(e,t,n)=>{var r=n(908),i=n(352);(0,i.lI)(r),r.__wbindgen_start();const l=(0,i.Yy)(),a=i.N1.new(),o=document.querySelectorAll(".rule-tile"),s=document.getElementById("rule-number-input"),c=document.getElementById("presets"),u=document.getElementById("grid-size"),d=document.getElementById("generate-button"),_=document.getElementById("automaton-canvas");let g=30,f=10,h=a.length(),w=0,b=null;_.width=1e3,_.height=1e3;const m=_.getContext("2d");function v(e){const t=e.currentTarget;t.classList.toggle("alive"),t.classList.toggle("dead"),function(){let e=0;o.forEach((t=>{const n=parseInt(t.getAttribute("data-index"));t.querySelector(".bot-row .cell.toggle").classList.contains("alive")&&(e|=1<<7-n)})),g=e}(),p(g),A(g)}function y(e){o.forEach((t=>{const n=parseInt(t.getAttribute("data-index")),r=t.querySelector(".bot-row .cell.toggle");e&1<<7-n?(r.classList.add("alive"),r.classList.remove("dead")):(r.classList.add("dead"),r.classList.remove("alive"))}))}function p(e){s.value=e}function A(e){const t=e.toString();let n=!1;for(let e=0;e<c.options.length;e++)if(c.options[e].value===t){c.selectedIndex=e,n=!0;break}n||(c.selectedIndex=-1)}o.forEach((e=>{e.querySelector(".bot-row .cell.toggle").addEventListener("click",v)})),c.addEventListener("change",(e=>{g=e.target.value,y(g),p(g)})),s.addEventListener("change",(e=>{g=e.target.value,!isNaN(g)&&0<=g&&g<=255?y(g):y(0),A(g)})),d.addEventListener("click",(function(e){let t=document.getElementById("starting-condition").value;if(function(){const e=u.value;return!isNaN(e)&&1<=e&&e<=1e3&&(a.set_length(e),h=e,f=_.width/e,!0)}())if(!isNaN(g)&&0<=g&&g<=255){null!==b&&cancelAnimationFrame(b),w=0;const e=g;a.change_rule(e),"singleCell"===t?function(){const e=a.cells(),t=new Uint8Array(l.buffer,e,h);for(let e=0;e<h;e++)t[e]=i.fh.Dead;t[Math.floor(h/2)]=i.fh.Alive}():function(){const e=a.cells(),t=new Uint8Array(l.buffer,e,h);for(let e=0;e<h;e++){let n=Math.random();t[e]=n<.5?i.fh.Alive:i.fh.Dead}}(),m.clearRect(0,0,_.width,_.height),E(),b=requestAnimationFrame(I)}else alert("Invalid rule (value must be between 0 and 255).");else alert("Invalid grid size (value must be between 1 and 1000).")}));const E=()=>{const e=a.cells(),t=new Uint8Array(l.buffer,e,h);m.beginPath();for(let e=0;e<h;e++)m.fillStyle=t[e]===i.fh.Dead?"#fafafa":"#333333",m.fillRect(e*f,w,f,f);m.stroke()},I=()=>{for(let e=0;e<5;e++){if(a.tick(),w+=f,w>=_.height)return void cancelAnimationFrame(b);E()}b=requestAnimationFrame(I)}},908:(e,t,n)=>{var r=n.w[e.id];for(var i in n.r(t),r)i&&(t[i]=r[i]);n(352),r[""]()}}]);